

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How can I create custom Jupyter kernels for the Satori web portal? &mdash; MIT Satori User Documentation  documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://researchcomputing.mit.edu/portal-howto/customization.html"/>
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How do I set up a basic conda environment?" href="../tips-and-tricks/carlos-quick-start-commands/index.html" />
    <link rel="prev" title="How can I see disk usage?" href="../tips-and-tricks/storage/index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> MIT Satori User Documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../satori-basics.html">Satori Basics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../satori-basics.html#what-is-satori">What is Satori?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../satori-basics.html#how-can-i-get-an-account">How can I get an account?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../satori-basics.html#getting-help">Getting help?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../satori-ssh.html">Satori Login</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../satori-ssh.html#web-portal-login">Web Portal Login</a></li>
<li class="toctree-l2"><a class="reference internal" href="../satori-ssh.html#ssh-login">SSH Login</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../satori-getting-started.html">Starting up on Satori</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../satori-getting-started.html#getting-your-account">Getting Your Account</a></li>
<li class="toctree-l2"><a class="reference internal" href="../satori-getting-started.html#shared-hpc-clusters">Shared HPC Clusters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../satori-getting-started.html#logging-in-to-satori">Logging in to Satori</a></li>
<li class="toctree-l2"><a class="reference internal" href="../satori-getting-started.html#the-satori-portal">The Satori Portal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../satori-getting-started.html#setting-up-your-environment">Setting up Your Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../satori-getting-started.html#transferring-files">Transferring Files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../satori-training.html">Training for faster onboarding in the system HW and SW architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../satori-workload-manager.html">Running your AI training jobs on Satori</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../satori-workload-manager.html#interactive-jobs">Interactive Jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../satori-workload-manager.html#batch-scripts">Batch Scripts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../satori-workload-manager.html#job-states">Job States</a></li>
<li class="toctree-l3"><a class="reference internal" href="../satori-workload-manager.html#monitoring-jobs">Monitoring Jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../satori-workload-manager.html#scheduling-policy">Scheduling Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../satori-workload-manager.html#batch-queue-policy">Batch Queue Policy</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../satori-troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../satori-ai-frameworks.html">IBM Watson Machine Learning Community Edition (WMLCE)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../satori-ai-frameworks.html#install-anaconda">[1] Install Anaconda</a></li>
<li class="toctree-l2"><a class="reference internal" href="../satori-ai-frameworks.html#wmlce-setting-up-the-software-repository">[2] WMLCE: Setting up the software repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="../satori-ai-frameworks.html#wmlce-creating-and-activate-conda-environments-recommended">[3] WMLCE: Creating and activate conda environments (recommended)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../satori-ai-frameworks.html#wmlce-installing-all-frameworks-at-the-same-time">[4] WMLCE: Installing all frameworks at the same time</a></li>
<li class="toctree-l2"><a class="reference internal" href="../satori-ai-frameworks.html#wmlce-testing-ml-dl-frameworks-pytorch-tensorflow-etc-installation">[5] WMLCE: Testing ML/DL frameworks (Pytorch, TensorFlow etc) installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../satori-ai-frameworks.html#controlling-wmlce-release-packages">Controlling WMLCE release packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../satori-ai-frameworks.html#additional-conda-channels">Additional conda channels</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../satori-ai-frameworks.html#the-wml-ce-supplementary-channel-is-available-at-https-anaconda-org-powerai">The WML CE Supplementary channel is available at: https://anaconda.org/powerai/.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../satori-ai-frameworks.html#the-wml-ce-early-access-channel-is-available-at-https-public-dhe-ibm-com-ibmdl-export-pub-software-server-ibm-ai-conda-early-access">The WML CE Early Access channel is available at: https://public.dhe.ibm.com/ibmdl/export/pub/software/server/ibm-ai/conda-early-access/.</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../satori-distributed-deeplearning.html">Distributed Deep Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../satori-large-model-support.html">IBM Large Model Support (LMS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lsf-templates/satori-lsf-ml-examples.html">Example machine learning LSF jobs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lsf-templates/satori-lsf-ml-examples.html#a-single-node-4-gpu-keras-example">A single node, 4 GPU Keras example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lsf-templates/satori-lsf-ml-examples.html#a-single-node-4-gpu-caffe-example">A single node, 4 GPU Caffe example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lsf-templates/satori-lsf-ml-examples.html#a-multi-node-pytorch-example">A multi-node, pytorch example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lsf-templates/satori-lsf-ml-examples.html#a-multi-node-pytorch-example-with-the-horovod-conda-environment">A multi-node, pytorch example with the horovod conda environment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../satori-howto-videos.html">Satori Howto Video Sessions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../satori-howto-videos.html#installing-wmcle-on-satori">Installing WMCLE on Satori</a></li>
<li class="toctree-l2"><a class="reference internal" href="../satori-howto-videos.html#pytorch-with-ddl-on-satori">Pytorch with DDL on Satori</a></li>
<li class="toctree-l2"><a class="reference internal" href="../satori-howto-videos.html#tensorflow-with-ddl-on-satori">Tensorflow with DDL on Satori</a></li>
<li class="toctree-l2"><a class="reference internal" href="../satori-howto-videos.html#jupyterlab-with-ssh-tunnel-on-satori">Jupyterlab with SSH Tunnel on Satori</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../satori-public-datasets.html">Satori Public Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../singularity.html">Singularity for Satorians</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../singularity.html#fast-start">Fast start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../singularity.html#other-notes">Other notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../singularity.html#interactive-allocation">Interactive Allocation:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../singularity.html#non-interactive-batch-mode">Non interactive / batch mode</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../satori-doc-examples-contributing.html">FAQ</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../satori-doc-examples-contributing.html#tips-tricks-and-questions">Tips, tricks and questions</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../tips-and-tricks/storage/index.html">How can I see disk usage?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tips-and-tricks/storage/index.html#where-should-i-put-world-or-project-shared-datasets">Where should I put world or project shared datasets?</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">How can I create custom Jupyter kernels for the Satori web portal?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#steps-to-create-a-kernel">Steps to create a kernel</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tips-and-tricks/carlos-quick-start-commands/index.html">How do I set up a basic conda environment?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html">System software queries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#what-linux-distribution-version-am-i-running">What Linux distribution version am I running?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#what-linux-kernel-level-am-i-running">What Linux kernel level am I running?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#what-software-levels-are-installed-on-the-system">What software levels are installed on the system?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#system-hardware-queries">System hardware queries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#what-is-my-cpu-configuration">What is my CPU configuration?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#whow-much-ram-is-there-on-my-nodes">WHow much RAM is there on my nodes?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#what-smt-mode-are-my-nodes-in">What SMT mode are my nodes in?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#what-cpu-governor-is-in-effect-on-my-nodes">What CPU governor is in effect on my nodes?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#what-are-the-logical-ids-and-uuids-for-the-gpus-on-my-nodes">What are the logical IDs and UUIDs for the GPUs on my nodes?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#what-is-the-ibm-model-of-my-system">What is the IBM model of my system?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#which-logical-cpus-belong-to-which-socket">Which logical CPUs belong to which socket?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#questions-about-my-jobs">Questions about my jobs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#how-can-i-establish-which-logical-cpu-ids-my-process-is-bound-to">How can I establish which logical CPU IDs my process is bound to?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#can-i-see-the-output-of-my-job-before-it-completes">Can I see the output of my job before it completes?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#i-have-a-job-waiting-in-the-queue-and-i-want-to-modify-the-options-i-had-selected">I have a job waiting in the queue, and I want to modify the options I had selected</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#i-have-submitted-my-job-several-times-but-i-get-no-output">I have submitted my job several times, but I get no output</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#how-do-i-set-a-time-limit-on-my-job">How do I set a time limit on my job?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#can-i-make-a-jobs-startup-depend-on-the-completion-of-a-previous-one">Can I make a job’s startup depend on the completion of a previous one?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#how-do-i-select-a-specific-set-of-hosts-for-my-job">How do I select a specific set of hosts for my job?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#how-do-i-deselect-specific-nodes-for-my-job">How do I deselect specific nodes for my job?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#my-jobs-runtime-environment-is-different-from-what-i-expected">My job’s runtime environment is different from what I expected</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tips-and-tricks/sys_queries/index.html#i-want-to-know-precisely-what-my-jobs-runtime-environment-is">I want to know precisely what my job’s runtime environment is</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../satori-tutorial-examples.html">Green Up Hackathon IAP 2020</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial-examples/index.html">Tutorial Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorial-examples/pytorch-style-transfer/index.html">Pytorch Style Transfer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/pytorch-style-transfer/index.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/pytorch-style-transfer/index.html#commands-to-run-this-example">Commands to run this example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/pytorch-style-transfer/index.html#code-and-input-data-repositories-for-this-example">Code and input data repositories for this example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/pytorch-style-transfer/index.html#useful-references">Useful references</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial-examples/neural-network-dna-demo/index.html">Neural network DNA</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/neural-network-dna-demo/index.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/neural-network-dna-demo/index.html#commands-to-run-this-example">Commands to run this example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/neural-network-dna-demo/index.html#code-and-input-data-repositories-for-this-example">Code and input data repositories for this example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/neural-network-dna-demo/index.html#useful-references">Useful references</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial-examples/transfer-learning-pathology/index.html">Pathology Image Classification Transfer Learning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/transfer-learning-pathology/index.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/transfer-learning-pathology/index.html#commands-to-run-this-example">Commands to run this example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/transfer-learning-pathology/index.html#code-and-input-data-repositories-for-this-example">Code and input data repositories for this example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/transfer-learning-pathology/index.html#useful-references">Useful references</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial-examples/tensorflow-2.x-multi-gpu-multi-node/index.html">Multi Node Multi GPU TensorFlow 2.0 Distributed Training Example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/tensorflow-2.x-multi-gpu-multi-node/index.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/tensorflow-2.x-multi-gpu-multi-node/index.html#prerequisites-if-you-are-not-yet-running-tensorflow-2-0">Prerequisites if you are not yet running TensorFlow 2.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/tensorflow-2.x-multi-gpu-multi-node/index.html#commands-to-run-this-example">Commands to run this example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/tensorflow-2.x-multi-gpu-multi-node/index.html#what-s-going-on-here">What’s going on here?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/tensorflow-2.x-multi-gpu-multi-node/index.html#code-and-input-data-repositories-for-this-example">Code and input data repositories for this example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/tensorflow-2.x-multi-gpu-multi-node/index.html#useful-references">Useful references</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial-examples/eric-fiala-wmlce-notebooks-master/index.html">WMLCE demonstration notebooks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/eric-fiala-wmlce-notebooks-master/index.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/eric-fiala-wmlce-notebooks-master/index.html#commands-to-run-this-example">Commands to run this example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/eric-fiala-wmlce-notebooks-master/index.html#code-and-input-data-repositories-for-this-example">Code and input data repositories for this example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/eric-fiala-wmlce-notebooks-master/index.html#useful-references">Useful references</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial-examples/unsupervised-learning-on-ocean-ecosystem-model/index.html">Finding clusters in high-dimensional data using tSNE and DB-SCAN</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/unsupervised-learning-on-ocean-ecosystem-model/index.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/unsupervised-learning-on-ocean-ecosystem-model/index.html#commands-to-run-this-example">Commands to run this example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/unsupervised-learning-on-ocean-ecosystem-model/index.html#code-and-input-data-repositories-for-this-example">Code and input data repositories for this example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/unsupervised-learning-on-ocean-ecosystem-model/index.html#useful-references">Useful references</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial-examples/biggan-pytorch/index.html">BigGAN-PyTorch</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/biggan-pytorch/index.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/biggan-pytorch/index.html#commands-to-run-this-example">Commands to run this example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/biggan-pytorch/index.html#code-and-input-data-repositories-for-this-example">Code and input data repositories for this example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/biggan-pytorch/index.html#useful-references">Useful references</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial-examples/index.html#measuring-resource-use">Measuring Resource Use</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorial-examples/energy-profiling/index.html">Intergrated energy use profiling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/energy-profiling/index.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/energy-profiling/index.html#commands-to-run-this-example">Commands to run this example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/energy-profiling/index.html#code-and-input-data-repositories-for-this-example">Code and input data repositories for this example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/energy-profiling/index.html#useful-references">Useful references</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial-examples/nvprof-profiling/index.html">Profiling code with nvprof</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/nvprof-profiling/index.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/nvprof-profiling/index.html#commands-to-run-the-examples">Commands to run the examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial-examples/nvprof-profiling/index.html#useful-references">Useful references</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../satori-getting-help.html">Getting help on Satori</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../satori-getting-help.html#email-help">Email help</a></li>
<li class="toctree-l2"><a class="reference internal" href="../satori-getting-help.html#slack">Slack</a></li>
<li class="toctree-l2"><a class="reference internal" href="../satori-getting-help.html#slack-or-satori-support-techsquare-com">Slack or satori-support&#64;techsquare.com</a></li>
<li class="toctree-l2"><a class="reference internal" href="../satori-getting-help.html#tips-and-tricks">Tips and Tricks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ause-coc.html">Acceptable Use and Code of Conduct</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ause-coc.html#acceptable-use-guidelines">Acceptable Use Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ause-coc.html#code-of-conduct">Code of Conduct</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MIT Satori User Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../satori-doc-examples-contributing.html">Contributed documentation and examples</a> &raquo;</li>
        
      <li>How can I create custom Jupyter kernels for the Satori web portal?</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/mit-satori/getting-started/blob/master/portal-howto/customization.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-can-i-create-custom-jupyter-kernels-for-the-satori-web-portal">
<h1>How can I create custom Jupyter kernels for the Satori web portal?<a class="headerlink" href="#how-can-i-create-custom-jupyter-kernels-for-the-satori-web-portal" title="Permalink to this headline">¶</a></h1>
<p>The Open On Demand (OOD) Satori portal has a set of centrally installed Jupyter kernels that
include common software. The aims is to cover most
things needed for frequently used tools. If you start using
the portal extensively, sometimes you will come across
packages that are missing and see a message like this image</p>
<a class="reference internal image-reference" href="../_images/module-not-found.png"><img alt="Module not found message" src="../_images/module-not-found.png" style="width: 400px;" /></a>
<p>This is a sad moment, but inevtiable because people keep creating new and exciting
packages and it is hard for the central repository to keep up.
Fortunately it is possible to create a custom kernel yourself.
This kernel will then be included in the OOD launcher options for your account alongside
the standard kernels. A kernel you create can
include any available software you can figure out how to install. The instructions on this
page show you how to go about creating your own kernel.</p>
<p><em>Note</em> you can also request that
modules be added to one of the standard environments or that a new standard environment
be added. The standard modues do evolve and new software is added as it the administration
group becomes aware of them. Sometimes, however, getting a module added to the standard environment
requires waiting a little, or the module may conflict with something else.</p>
<p>By learning how to add your own kernels you can avoid having to wait and work around
any incompatibilities. You can also gather customized, versioned sets of tools into
a standard kernels that can then be shared within a group working on a common
project, or that you can request be added for your group to a standard set. This can
be more efficient than having to wait for something to installed centrally every
time you find a new awesome package that all the cool people are using.</p>
<p>An additional benefit of knowing how to create your own kernels is that it can help with sharing and reproducibility
of results. Strict versioning and maintaining historic kernels in perpetuity in central locations
can easily become an impractical combinatorial challenge. Creating
precise kernels that collect specific version combinations of software in an
immutable state in a per account location can help, although this still requires care and
diligence!</p>
<div class="section" id="steps-to-create-a-kernel">
<h2>Steps to create a kernel<a class="headerlink" href="#steps-to-create-a-kernel" title="Permalink to this headline">¶</a></h2>
<p>These instructions assume you are slightly familiar with conda ( <a class="reference external" href="https://docs.conda.io/en/latest/index.html" target="_blank">https://docs.conda.io/en/latest/index.html</a> ), that you are
starting a brand new conda environment for this kernel. The steps involve a series of terminal commands and assume
you are familiar with working at the terminal command line ( if you are not you can ask someone for
help and can also find tutorials on line <a class="reference external" href="https://ryanstutorials.net/linuxtutorial/" target="_blank">https://ryanstutorials.net/linuxtutorial/</a> ). There is a terminal
available in the OOD portal, under the <strong>Clusters</strong> pull-down.</p>
<a class="reference internal image-reference" href="../_images/clusters-pull-down.png"><img alt="Cluster terminal pull down" src="../_images/clusters-pull-down.png" style="width: 400px;" /></a>
<p>we will use the OOD terminal for executing the steps needed for a custom kernel. Alternatively, the same steps
can be carried out when logged in from an ssh session, for example via the command line
<code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">-l</span> <span class="pre">USER</span> <span class="pre">satori-login-001.mit.edu</span></code> of through a client like PuTTY.</p>
<p>To create our new kernel we will</p>
<ol class="arabic simple">
<li><strong>Create</strong> a brand new, clean conda environment in a new directory</li>
<li><strong>Activate</strong> the environment and install the packages we need</li>
<li><strong>Initialise</strong> the interactive python settings for the new environment</li>
</ol>
<div class="section" id="commands-to-create-a-new-conda-environment-with-a-custom-python-kernel">
<h3>Commands to create a new conda environment with a custom Python kernel<a class="headerlink" href="#commands-to-create-a-new-conda-environment-with-a-custom-python-kernel" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first"><strong>Create.</strong> The bash shell commands create a new conda environment. This example uses the account name <code class="docutils literal notranslate"><span class="pre">cnh</span></code>. The new
environment is placed in a new directory under the scratch space <code class="docutils literal notranslate"><span class="pre">/nobackup/users/cnh/projects/condas</span></code> belonging to
the account <code class="docutils literal notranslate"><span class="pre">cnh</span></code>. The new environment is named <code class="docutils literal notranslate"><span class="pre">cnh-awesome-new-environment</span></code>. These values can be changed for
different accounts and ways of organizing files. The command sequence starts with <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">deactivate</span></code> to prevent
inadvertantly overwriting and existing conda environment. If conda is not already activted then the message <code class="docutils literal notranslate"><span class="pre">conda:</span>
<span class="pre">command</span> <span class="pre">not</span> <span class="pre">found</span></code> may be printed. That is OK:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CKNAME=cnh-awesome-new-environment
CKUSER=cnh
CKROOT=projects/condas
conda deactivate
mkdir -p /nobackup/users/${CKUSER}/${CKROOT}/${CKNAME}
cd /nobackup/users/${CKUSER}/${CKROOT}/${CKNAME}
wget https://repo.continuum.io/miniconda/Miniconda2-4.7.12.1-Linux-ppc64le.sh
chmod +x Miniconda2-4.7.12.1-Linux-ppc64le.sh
./Miniconda2-4.7.12.1-Linux-ppc64le.sh -b -p `pwd`/miniconda3
. miniconda3/etc/profile.d/conda.sh
conda config --prepend channels https://public.dhe.ibm.com/ibmdl/export/pub/software/server/ibm-ai/conda/
</pre></div>
</div>
<p><strong>NOTE</strong> - the conda commands tend to hard code full path names as part of their installation. So, once the <strong>Create</strong> step
is complete, renaming or moving the install directory
( <code class="docutils literal notranslate"><span class="pre">/nobackup/users/cnh/projects/condas/cnh-awesome-new-environment</span></code> in this example) will break the setup.</p>
</li>
<li><p class="first"><strong>Activate.</strong> Once the new conda environment has been created in its own directory, make sure the shell still has the
correct settings and then <em>activate</em> the environment in the terminal shell session using the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CKNAME=cnh-awesome-new-environment
CKUSER=cnh
CKROOT=projects/condas
cd /nobackup/users/${CKUSER}/${CKROOT}/${CKNAME}
export PATH=&quot;`pwd`/miniconda3/bin:$PATH&quot;
. miniconda3/etc/profile.d/conda.sh
conda create -y --name ${CKNAME} python=3.6
conda activate ${CKNAME}
</pre></div>
</div>
<p><strong>NOTE</strong> - the conda environment <strong>activate</strong> step applies to the terminal shell session in which
the <strong>activate</strong> commands are run. If you start a new terminal or shell you will need to rerun the activate step before
exectuing the <strong>install</strong> commands.</p>
</li>
<li><p class="first"><strong>Install.</strong> Once the conda environment has been <strong>created</strong> and is <strong>activated</strong> in the terminal shell the final step
involves running install commands in the shell. In the example shown here we will install the IBM <code class="docutils literal notranslate"><span class="pre">powerai</span></code>
software stack and add <code class="docutils literal notranslate"><span class="pre">keras</span></code> (<a class="reference external" href="https://anaconda.org/anaconda/keras" target="_blank">https://anaconda.org/anaconda/keras</a>), <code class="docutils literal notranslate"><span class="pre">patsy</span></code> (<a class="reference external" href="https://anaconda.org/anaconda/patsy" target="_blank">https://anaconda.org/anaconda/patsy</a>),
<code class="docutils literal notranslate"><span class="pre">seaborn</span></code> ( <a class="reference external" href="https://anaconda.org/anaconda/seaborn" target="_blank">https://anaconda.org/anaconda/seaborn</a> ), <code class="docutils literal notranslate"><span class="pre">statsmodels</span></code> ( <a class="reference external" href="https://anaconda.org/anaconda/statsmodels" target="_blank">https://anaconda.org/anaconda/statsmodels</a> )
and <code class="docutils literal notranslate"><span class="pre">netcdf4</span></code> (<a class="reference external" href="https://anaconda.org/anaconda/netcdf4" target="_blank">https://anaconda.org/anaconda/netcdf4</a>). All except <code class="docutils literal notranslate"><span class="pre">netcdf4</span></code> are currently in a standard
kernel on Satori. We include an environment variable <code class="docutils literal notranslate"><span class="pre">IBM_POWERAI_LICENSE_ACCEPT=yes</span></code> so that we can run things
without interaction. The final commands needed are then:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CKNAME=cnh-awesome-new-environment
CKUSER=cnh
CKROOT=projects/condas
cd /nobackup/users/${CKUSER}/${CKROOT}/${CKNAME}
export PATH=&quot;`pwd`/miniconda3/bin:$PATH&quot;
. miniconda3/etc/profile.d/conda.sh
conda activate ${CKNAME}
export IBM_POWERAI_LICENSE_ACCEPT=yes
conda install -y powerai
conda install -y keras patsy seaborn netcdf4
pip install --user ipykernel
python -m ipykernel install --user --name=${CKNAME}
</pre></div>
</div>
<p>This creates a new kernel we can start from in the OOD Jupyter launcher. It should be visible, under the name given by
<code class="docutils literal notranslate"><span class="pre">${CKNAME}</span></code> , when a new Jupyter session is started.</p>
</li>
</ol>
</div>
<div class="section" id="an-added-bonus-updating-on-the-fly">
<h3>An added bonus - updating on the fly<a class="headerlink" href="#an-added-bonus-updating-on-the-fly" title="Permalink to this headline">¶</a></h3>
<p>Once you have created a new kernel conda environment it is ownde by your account, so it can be updated if needed. This
is unlike the standard system kernels which are currently read-only. For example in the example above the kernel
environment does not include <code class="docutils literal notranslate"><span class="pre">cuml</span></code> ( <a class="reference external" href="https://anaconda.org/rapidsai/cuml" target="_blank">https://anaconda.org/rapidsai/cuml</a> ). The <code class="docutils literal notranslate"><span class="pre">cuml</span></code> package can be used to
greatly accelerate TSNE dimensionality reduction
( see - <a class="reference external" href="https://medium.com/rapids-ai/tsne-with-gpus-hours-to-seconds-9d9c17c941db" target="_blank">https://medium.com/rapids-ai/tsne-with-gpus-hours-to-seconds-9d9c17c941db</a> ), so it may be neded at some point e.g.
when an import like <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">cuml.manifold</span> <span class="pre">import</span> <span class="pre">TSNE</span></code> fails. Rather than going through the entire <strong>Create</strong>,
<strong>Activate</strong>, <strong>Install</strong> sequence from scratch we can update in a Terminal within Jupyter and then reestart our
kernel. The commands for this are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CKNAME=cnh-awesome-new-environment
CKUSER=cnh
CKROOT=projects/condas
cd /nobackup/users/${CKUSER}/${CKROOT}/${CKNAME}
export PATH=&quot;`pwd`/miniconda3/bin:$PATH&quot;
. miniconda3/etc/profile.d/conda.sh
conda activate ${CKNAME}
conda install cuml
</pre></div>
</div>
<p>when this completes we can restart the kernel and the new package will be avaiable.</p>
</div>
<div class="section" id="some-additional-steps-for-julia-and-octave">
<h3>Some additional steps for Julia and Octave<a class="headerlink" href="#some-additional-steps-for-julia-and-octave" title="Permalink to this headline">¶</a></h3>
<p>Additionally we might want to include a Julia interactive environment and an Octave interactive environment. This section should document more about how that works. This content is still under development:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="n">julia</span><span class="o">/</span><span class="mf">1.3</span><span class="o">.</span><span class="mi">0</span>
<span class="n">julia</span> <span class="o">-</span><span class="n">E</span> <span class="s1">&#39;using Pkg; Pkg.add(&quot;IJulia&quot;)&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="files-and-directories">
<h3>Files and directories<a class="headerlink" href="#files-and-directories" title="Permalink to this headline">¶</a></h3>
<p>There are several files and directories that are useful to know about. This section will provide some details on these. Some of the key files are listed below. This section is still under development:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">~/.</span><span class="n">local</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">jupyter</span><span class="o">/</span><span class="n">kernels</span><span class="o">/</span><span class="n">cnh</span><span class="o">-</span><span class="n">awesome</span><span class="o">-</span><span class="n">new</span><span class="o">-</span><span class="n">environment</span><span class="o">/</span>
<span class="o">~/.</span><span class="n">local</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">jupyter</span><span class="o">/</span><span class="n">kernels</span><span class="o">/</span><span class="n">cnh</span><span class="o">-</span><span class="n">awesome</span><span class="o">-</span><span class="n">new</span><span class="o">-</span><span class="n">environment</span><span class="o">/</span><span class="n">kernel</span><span class="o">.</span><span class="n">json</span>
<span class="o">~/.</span><span class="n">local</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">jupyter</span><span class="o">/</span><span class="n">kernels</span><span class="o">/</span><span class="n">julia</span><span class="o">-</span><span class="mf">1.3</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../tips-and-tricks/carlos-quick-start-commands/index.html" class="btn btn-neutral float-right" title="How do I set up a basic conda environment?" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../tips-and-tricks/storage/index.html" class="btn btn-neutral float-left" title="How can I see disk usage?" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, MIT Satori Project

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>